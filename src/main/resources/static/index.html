<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>WebRTC Group Call (SFU)</title>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <style>
        video {
            width: 100%;
            border: 2px solid #333;
            background-color: #000;
        }

        .video-box {
            position: relative;
            margin-bottom: 20px;
        }

        .video-label {
            position: absolute;
            background: rgba(0, 0, 0, 0.5);
            color: white;
            padding: 2px 10px;
            top: 0;
            left: 15px;
            /* Alignment with bootstrap col padding */
        }
    </style>
</head>

<body>

    <div class="container mt-4">
        <h2 class="text-center">WebRTC Group Call</h2>

        <!-- Login / Join Room Section -->
        <div id="join-section" class="row justify-content-center mt-4">
            <div class="col-md-6 border p-4 bg-light">
                <div class="form-group">
                    <label>Name:</label>
                    <input type="text" id="name" class="form-control" placeholder="Enter your name">
                </div>
                <div class="form-group">
                    <label>Room Name:</label>
                    <input type="text" id="roomName" class="form-control" placeholder="Enter room name">
                </div>
                <div class="form-group">
                    <label>Role:</label>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="role" id="roleUser" value="user" checked>
                        <label class="form-check-label" for="roleUser">User (Share Screen)</label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="radio" name="role" id="roleManager" value="manager">
                        <label class="form-check-label" for="roleManager">Manager (View Only)</label>
                    </div>
                </div>
                <button id="joinBtn" class="btn btn-success btn-block">Join Room</button>
            </div>
        </div>

        <!-- Room Section (Hidden by default) -->
        <div id="room-section" class="d-none mt-4">
            <div class="row">
                <div class="col-md-12 mb-3">
                    <button id="leaveBtn" class="btn btn-danger float-right">Leave Room</button>
                    <h4>Room: <span id="room-header"></span></h4>
                </div>
            </div>

            <!-- Video Grid -->
            <div class="row" id="video-grid">
                <!-- Local Video -->
                <div class="col-md-4 video-box" id="local-video-wrapper">
                    <div class="video-label">Me</div>
                    <video id="videoInput" autoplay playsinline muted></video>
                </div>
                <!-- Remote videos will be appended here -->
            </div>
        </div>
    </div>

    <script src="/webjars/webrtc-adapter/release/adapter.js"></script>
    <script src="/webjars/jquery/dist/jquery.min.js"></script>
    <script src="/js/kurento-utils.js"></script>
    <script src="js/main.js"></script>
</body>

</html>